<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isuru Furniture - 45 Years of Excellence</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Theme: Midnight Navy, Bronze Gold, and Pearl White */
            --primary-color: #0f2b46; /* Midnight Navy - Trust & Stability */
            --secondary-color: #c5a059; /* Bronze Gold - Excellence */
            --text-color: #333333;
            --light-bg: #fdfbf7; /* Pearl White */
            --white: #ffffff;
            --dark-overlay: rgba(15, 43, 70, 0.9);
            --font-family: 'Playfair Display', 'Times New Roman', serif;
            --sans-font: 'Segoe UI', Roboto, sans-serif;
        }

        /* Reset & Base */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--sans-font); line-height: 1.6; color: var(--text-color); background-color: var(--light-bg); overflow-x: hidden; }
        h1, h2, h3, h4 { font-family: var(--font-family); letter-spacing: 0.5px; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Header */
        header { background-color: var(--white); border-bottom: 1px solid #eee; padding: 10px 0; }
        .top-bar { background-color: var(--primary-color); color: var(--secondary-color); font-size: 0.85em; text-align: center; padding: 8px 0; letter-spacing: 1px; font-weight: 600; }
        
        .header-content { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; }
        .logo { display: flex; align-items: center; }
        .logo img { height: 65px; margin-right: 15px; }
        .logo h1 { font-size: 2.2em; font-weight: 700; color: var(--primary-color); text-transform: uppercase; line-height: 1; }
        .logo span { font-size: 0.4em; color: var(--secondary-color); display: block; letter-spacing: 3px; font-family: var(--sans-font); font-weight: 700; }
        
        .contact-header { text-align: right; font-size: 0.9em; color: var(--text-color); }
        .contact-header div { margin-bottom: 5px; }
        .contact-header i { color: var(--primary-color); width: 20px; text-align: center; }

        /* Navigation */
        nav { background-color: var(--primary-color); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.15); border-bottom: 3px solid var(--secondary-color); }
        .nav-list { list-style: none; display: flex; justify-content: center; margin: 0; padding: 0; }
        .nav-list a { display: block; color: var(--white); text-decoration: none; font-weight: 500; padding: 18px 30px; transition: 0.3s; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; }
        .nav-list a:hover { background-color: var(--secondary-color); color: var(--primary-color); }
        
        .menu-toggle { display: none; background: none; border: none; color: var(--secondary-color); font-size: 1.8em; position: absolute; right: 20px; top: 8px; cursor: pointer; }

        /* Hero Section */
        .hero { background: linear-gradient(rgba(15, 43, 70, 0.85), rgba(15, 43, 70, 0.7)), url('bac.png') no-repeat center center/cover; color: var(--white); text-align: center; padding: 140px 20px; position: relative; }
        .hero h2 { font-size: 4em; margin-bottom: 15px; font-weight: 700; color: var(--secondary-color); text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .hero p { font-size: 1.5em; margin-bottom: 35px; font-weight: 300; max-width: 800px; margin-left: auto; margin-right: auto; color: #f0f0f0; }
        .btn { display: inline-block; background-color: var(--secondary-color); color: var(--primary-color); padding: 14px 40px; text-decoration: none; border-radius: 4px; font-weight: 700; text-transform: uppercase; transition: 0.3s; cursor: pointer; border: none; letter-spacing: 1px; box-shadow: 0 4px 15px rgba(197, 160, 89, 0.3); }
        .btn:hover { background-color: var(--white); transform: translateY(-3px); }

        /* Section Global */
        .section { padding: 90px 0; text-align: center; }
        .section h3 { font-size: 2.8em; margin-bottom: 10px; color: var(--primary-color); }
        .section-subtitle { font-family: var(--sans-font); color: var(--secondary-color); text-transform: uppercase; font-weight: 700; letter-spacing: 2px; margin-bottom: 40px; display: block; font-size: 0.9em; }
        .section p { font-size: 1.1em; max-width: 800px; margin: 0 auto 50px; color: #666; }

        /* About Us */
        .about-us { background-color: var(--white); text-align: left; }
        .about-content { display: flex; flex-wrap: wrap; align-items: center; gap: 60px; margin-top: 30px; }
        .about-image { flex: 1; min-width: 300px; position: relative; }
        .about-image img { width: 100%; border-radius: 4px; box-shadow: 20px 20px 0 var(--secondary-color); border: 1px solid #ddd; }
        .about-text { flex: 1.2; min-width: 300px; }
        .about-text h4 { font-size: 1.8em; color: var(--primary-color); margin-bottom: 20px; }
        .about-text p { margin-bottom: 15px; text-align: justify; line-height: 1.8; }
        
        .director-card { margin-top: 30px; padding: 20px; background: var(--light-bg); border-left: 5px solid var(--secondary-color); }
        .director-card strong { color: var(--primary-color); font-size: 1.2em; display: block; font-family: var(--font-family); }
        .director-card span { font-size: 0.9em; color: #777; }

        /* Why Choose Us (The 6-Grid) */
        .why-choose-us { background-color: var(--light-bg); }
        .why-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; }
        .why-item { background: var(--white); padding: 35px 25px; width: calc(33.333% - 20px); min-width: 300px; border: 1px solid #eee; text-align: left; border-radius: 6px; transition: 0.3s; }
        .why-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); border-bottom: 3px solid var(--secondary-color); }
        .why-item i { font-size: 2.2em; color: var(--secondary-color); margin-bottom: 15px; display: block; }
        .why-item h4 { font-size: 1.3em; margin-bottom: 10px; color: var(--primary-color); font-weight: 700; }
        .why-item p { font-size: 0.95em; margin: 0; color: #555; }

        /* Services/Strengths (The 4-Grid) */
        .features { background-color: var(--white); }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 20px; }
        .feature-item { padding: 40px 20px; border: 1px solid #f0f0f0; border-radius: 8px; transition: 0.3s; background: var(--light-bg); }
        .feature-item:hover { background: var(--primary-color); color: white; transform: scale(1.02); }
        .feature-item:hover h4, .feature-item:hover p, .feature-item:hover i { color: white; }
        .feature-item i { font-size: 3em; color: var(--primary-color); margin-bottom: 20px; transition: 0.3s; }
        .feature-item h4 { font-size: 1.4em; color: var(--primary-color); margin-bottom: 10px; transition: 0.3s; }
        .feature-item p { color: #666; font-size: 1em; margin: 0; transition: 0.3s; }

        /* Products */
        .products { background-color: #f8f9fa; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .product-card { background: var(--white); border: 1px solid #eee; transition: 0.3s; border-radius: 6px; overflow: hidden; position: relative; }
        .product-card:hover { box-shadow: 0 15px 35px rgba(0,0,0,0.1); border-color: var(--secondary-color); }
        .product-card img { width: 100%; height: 260px; object-fit: cover; }
        .product-info { padding: 25px; text-align: left; }
        .product-info h4 { font-size: 1.3em; margin-bottom: 8px; color: var(--primary-color); }
        .product-actions { display: flex; gap: 10px; margin-top: 15px; }
        .btn-sm { flex: 1; padding: 10px; font-size: 0.85em; text-align: center; border: none; cursor: pointer; border-radius: 3px; color: white; text-decoration: none; display: inline-block; }
        .add-to-cart { background-color: var(--primary-color); }
        .btn-whatsapp { background-color: #25d366; }

        /* Testimonials */
        .testimonials { background: var(--dark-overlay), url('bac.png') fixed center/cover; color: white; padding: 80px 20px; }
        .testimonials h3 { color: white; }
        .testimonial-carousel { max-width: 900px; margin: 0 auto; overflow: hidden; position: relative; }
        .testimonial-card { text-align: center; padding: 20px; display: none; animation: fadeIn 0.8s; }
        .testimonial-card.active { display: block; }
        .testimonial-card i { font-size: 2.5em; color: var(--secondary-color); margin-bottom: 20px; }
        .testimonial-card p { font-size: 1.4em; font-style: italic; font-family: var(--font-family); margin-bottom: 25px; line-height: 1.6; }
        .testimonial-card span { font-weight: 700; color: var(--secondary-color); text-transform: uppercase; letter-spacing: 1px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Contact & Socials */
        .contact-section { background: var(--white); }
        .contact-grid { display: grid; grid-template-columns: 1fr 1.2fr; gap: 50px; text-align: left; margin-top: 40px; }
        
        .contact-form { background: var(--light-bg); padding: 40px; border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-top: 4px solid var(--primary-color); }
        .contact-form label { color: var(--primary-color); font-weight: 700; display: block; margin-bottom: 8px; }
        .contact-form input, .contact-form textarea { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; background: white; }
        
        .contact-info-block h4 { font-size: 1.8em; color: var(--primary-color); margin-bottom: 20px; }
        .contact-details p { margin-bottom: 15px; display: flex; align-items: flex-start; font-size: 1.05em; color: #555; }
        .contact-details i { color: var(--secondary-color); margin-right: 15px; margin-top: 5px; font-size: 1.2em; }
        .contact-details a { color: inherit; text-decoration: none; font-weight: 600; }
        
        .social-bar { margin-top: 30px; display: flex; gap: 15px; }
        .social-link { width: 45px; height: 45px; background: var(--primary-color); color: white; display: flex; justify-content: center; align-items: center; border-radius: 50%; text-decoration: none; transition: 0.3s; font-size: 1.2em; }
        .social-link:hover { background: var(--secondary-color); transform: scale(1.1); }

        #map-container { height: 300px; width: 100%; border-radius: 4px; overflow: hidden; margin-top: 25px; border: 1px solid #ddd; }

        /* Footer */
        footer { background-color: #05101a; color: #888; text-align: center; padding: 50px 0; border-top: 4px solid var(--secondary-color); }
        footer a { color: var(--secondary-color); text-decoration: none; }

        /* Widgets */
        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 30px; right: 30px; background-color: #25d366; color: #FFF; border-radius: 50px; text-align: center; font-size: 32px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; display: flex; align-items: center; justify-content: center; text-decoration: none !important; }
        #cart-sidebar { position: fixed; top: 0; right: -400px; width: 350px; height: 100%; background-color: var(--white); box-shadow: -5px 0 15px rgba(0,0,0,0.1); z-index: 1001; padding: 30px; transition: right 0.4s ease; display: flex; flex-direction: column; }
        #open-cart-btn { position: fixed; bottom: 110px; right: 30px; width: 60px; height: 60px; background-color: var(--primary-color); color: var(--secondary-color); border: 2px solid var(--secondary-color); border-radius: 50%; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 999; cursor: pointer; }

        /* 300px SUPER Responsive */
        @media (max-width: 900px) {
            .contact-grid { grid-template-columns: 1fr; }
            .why-item { width: calc(50% - 20px); }
        }

        @media (max-width: 768px) {
            .header-content { flex-direction: column; text-align: center; gap: 15px; }
            .contact-header { text-align: center; margin-top: 5px; }
            .menu-toggle { display: block; }
            .nav-list { display: none; flex-direction: column; width: 100%; padding: 10px 0; }
            .nav-list.active { display: flex; }
            .nav-list li { border-bottom: 1px solid rgba(255,255,255,0.1); }
            .hero h2 { font-size: 2.8em; }
            .about-content { flex-direction: column; }
            .why-item { width: 100%; }
            #cart-sidebar { width: 100%; right: -100%; }
        }

        @media (max-width: 350px) {
            .container { padding: 0 10px; }
            .logo h1 { font-size: 1.6em; }
            .logo span { letter-spacing: 1px; font-size: 0.5em; }
            .hero { padding: 80px 10px; }
            .hero h2 { font-size: 2em; line-height: 1.2; }
            .section h3 { font-size: 1.8em; }
            .why-item, .feature-item, .product-card { width: 100%; min-width: 100%; padding: 20px; }
            .contact-header { font-size: 0.8em; }
            .whatsapp-float, #open-cart-btn { width: 50px; height: 50px; font-size: 24px; right: 15px; }
            #open-cart-btn { bottom: 75px; }
            .whatsapp-float { bottom: 15px; }
            .btn { width: 100%; padding: 12px; font-size: 0.9em; }
            .product-actions { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        Welcome to Isuru Furniture - Moratumulla's Finest Since 1978
    </div>

    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="logo.png" alt="Isuru Furniture Logo">
                <div>
                    <h1>Isuru Furniture</h1>
                    <span>OVER 45 YEARS OF EXCELLENCE</span>
                </div>
            </div>
            <div class="contact-header">
                <div><i class="fas fa-phone-alt"></i> <a href="tel:+94758004160" style="color:inherit; text-decoration:none;">075 800 4160</a> | 077 758 5682</div>
                <div><i class="fas fa-phone"></i> 011 265 2843</div>
                <div><i class="fas fa-map-marker-alt"></i> 209/B, De Soysa Rd, Moratumulla</div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
            <ul class="nav-list" id="navList">
                <li><a href="#about">About Us</a></li>
                <li><a href="#why-choose-us">Why Choose Us</a></li>
                <li><a href="#services">Our Craft</a></li>
                <li><a href="#products">Catalogue</a></li>
                <li><a href="#reviews">Reviews</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <h2>Royal Comfort, Timeless Design</h2>
                <p>Manufacturers of high-quality furniture that transforms houses into palaces. Directly from Moratumulla's finest craftsmen.</p>
                <a href="#products" class="btn">View Our Collection</a>
            </div>
        </section>

        <section id="about" class="section about-us">
            <div class="container">
                <h3>The Isuru Legacy</h3>
                <span class="section-subtitle">A Tradition of Quality</span>
                <div class="about-content">
                    <div class="about-image">
                        <img src="shop.png" alt="Isuru Furniture Workshop">
                    </div>
                    <div class="about-text">
                        <h4>A Legacy of Manufacturing Excellence</h4>
                        <p>At <strong>Isuru Furniture</strong>, we don't just sell furniture; we create it. Situated at No. 209/B, De Soysa Rd, Moratumulla—the heart of Sri Lankan carpentry—we pride ourselves on being direct manufacturers of premium quality furniture for over 45 years.</p>
                        <p>Our journey is defined by a passion for wood and an eye for detail. Under the visionary leadership of our Managing Director, <strong>Mr. W. Lasantha Fernando</strong>, we have grown from a small workshop to a trusted brand known for durability and elegance.</p>
                        <p>Unlike mass-produced items, every piece that leaves our workshop is inspected for structural integrity, finish, and aesthetic appeal. Whether you need a majestic teak bed or a modern sofa set, our artisans handcraft it to perfection.</p>
                        
                        <div class="director-card">
                            <strong>W. Lasantha Fernando</strong>
                            <span>Managing Director - Isuru Furniture</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="why-choose-us" class="section why-choose-us">
            <div class="container">
                <h3>Why Choose Isuru Furniture?</h3>
                <span class="section-subtitle">We deliver more than just furniture</span>
                
                <div class="why-container">
                    <div class="why-item">
                        <i class="fas fa-industry"></i>
                        <h4>Direct Manufacturer</h4>
                        <p>No middlemen. You buy directly from our Moratumulla workshop, ensuring you get the best factory prices.</p>
                    </div>
                    <div class="why-item">
                        <i class="fas fa-crown"></i>
                        <h4>Royal Designs</h4>
                        <p>From intricate traditional carvings to sleek modern minimalism, our designs add royalty to your space.</p>
                    </div>
                    <div class="why-item">
                        <i class="fas fa-pencil-ruler"></i>
                        <h4>Custom Fabrication</h4>
                        <p>Have a specific design? We specialize in custom-made furniture. Bring a photo, and we will build it.</p>
                    </div>
                    <div class="why-item">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Durability Guaranteed</h4>
                        <p>We use seasoned timber (Teak, Mahogany, Mara) and high-grade fabrics built for generations.</p>
                    </div>
                    <div class="why-item">
                        <i class="fas fa-shipping-fast"></i>
                        <h4>Reliable Delivery</h4>
                        <p>Safe and timely delivery services available to your doorstep with careful handling.</p>
                    </div>
                    <div class="why-item">
                        <i class="fas fa-headset"></i>
                        <h4>Dedicated Support</h4>
                        <p>Call or WhatsApp us anytime. We assist with measurements, material selection, and after-sales.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="section features">
            <div class="container">
                <h3>Our Core Strengths</h3>
                <span class="section-subtitle">What makes us the preferred choice</span>
                <div class="features-grid">
                    <div class="feature-item">
                        <i class="fas fa-tree"></i>
                        <h4>Premium Timber</h4>
                        <p>We strictly use high-quality Teak, Mahogany, and Mara, properly seasoned to prevent warping.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-paint-roller"></i>
                        <h4>Precision Finish</h4>
                        <p>Our spray painting and polishing techniques ensure a flawless, glass-like or matte finish.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-couch"></i>
                        <h4>Comfort Focused</h4>
                        <p>Ergonomics is key. Our sofas and chairs are designed for maximum comfort without compromising style.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-double"></i>
                        <h4>Quality Control</h4>
                        <p>Every joint, screw, and stitch is checked. We don't cut corners in manufacturing.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="section products">
            <div class="container">
                <h3>Our Product Catalogue</h3>
                <span class="section-subtitle">Explore our latest creations</span>

                <div class="product-grid" id="productGrid">
                    <!-- Products loaded via Firebase -->
                    <p style="width:100%; text-align:center; font-size:1.2em; color:var(--primary-color);">Loading our collection...</p>
                </div>
            </div>
        </section>

        <section id="reviews" class="section testimonials">
            <div class="container">
                <h3>Customer Experiences</h3>
                <span class="section-subtitle" style="color:#ddd;">What our clients say about us</span>
                
                <div class="testimonial-carousel">
                    <div class="testimonial-card active">
                        <i class="fas fa-quote-left"></i>
                        <p>"I visited Isuru Furniture in Moratumulla and was amazed by the quality. Mr. Lasantha helped me design a custom wardrobe. The finish is perfect. Highly recommended!"</p>
                        <span>- Roshan Silva (Mount Lavinia)</span>
                    </div>
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>"We bought a full sofa set and dining table. The wood is solid and heavy, unlike the cheap stuff in showrooms. 45 years of experience really shows."</p>
                        <span>- Mrs. K. Jayawardena (Piliyandala)</span>
                    </div>
                    <div class="testimonial-card">
                        <i class="fas fa-quote-left"></i>
                        <p>"Excellent service and genuine pricing. They delivered to Colombo on time. The finishing of the bed is absolutely royal."</p>
                        <span>- A. Perera (Panadura)</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="section contact-section">
            <div class="container">
                <h3>Get In Touch</h3>
                <span class="section-subtitle">Visit our showroom or workshop</span>

                <div class="contact-grid">
                    <div class="contact-info-block">
                        <h4>Contact Details</h4>
                        <div class="contact-details">
                            <p><i class="fas fa-map-marker-alt"></i> <span><strong>Address:</strong><br>209/B, De Soysa Rd,<br>Moratumulla, Moratuwa.</span></p>
                            <p><i class="fab fa-whatsapp"></i> <span><strong>WhatsApp:</strong> <a href="https://wa.me/94777585682">077 758 5682</a></span></p>
                            <p><i class="fas fa-phone-alt"></i> <span><strong>Call Us:</strong> <a href="tel:+94758004160">075 800 4160</a> / 011 265 2582</span></p>
                            <p><i class="fas fa-envelope"></i> <span><strong>Email:</strong> isurufurniture777@gmail.com</span></p>
                        </div>

                        <div class="social-bar">
                            <a href="https://www.facebook.com/isuru.furniture" target="_blank" class="social-link"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com/isuru.furniture" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.tiktok.com/@isuru.furniture" target="_blank" class="social-link"><i class="fab fa-tiktok"></i></a>
                        </div>

                        <div id="map-container">
                            <!-- Moratumulla Map -->
                            <iframe 
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15846.592532456!2d79.878!3d6.812!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae2450000000001%3A0x0!2sMoratumulla!5e0!3m2!1sen!2slk!4v1700000000000" 
                                width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
                            </iframe>
                        </div>
                    </div>

                    <div class="contact-form">
                        <h4>Send us a Message</h4>
                        <form id="contactForm">
                            <label for="name">Your Name</label>
                            <input type="text" id="name" name="name" required>

                            <label for="phone">Your Mobile Number</label>
                            <input type="tel" id="phone" name="phone" required>

                            <label for="message">Your Inquiry (Items, Custom Designs etc.)</label>
                            <textarea id="message" name="message" rows="5" required></textarea>

                            <button type="submit" class="btn" style="width:100%;">Send via WhatsApp <i class="fab fa-whatsapp"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; <span id="currentYear"></span> Isuru Furniture. All rights reserved.</p>
            <p>209/B, De Soysa Rd, Moratumulla, Moratuwa.</p>
            <p style="font-size: 0.85em; opacity: 0.6; margin-top: 15px;">Development by Sahan Colombage</p>
            <p><a href="admin.html" style="font-size: 0.8em; opacity: 0.5;">Admin Login</a></p>
        </div>
    </footer> 

    <!-- Floating WhatsApp -->
    <a href="https://wa.me/94777585682" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar">
        <h3 style="color:var(--primary-color); border-bottom:2px solid var(--secondary-color); padding-bottom:10px;">Quote List (<span id="cart-count">0</span>)</h3>
        <div id="cart-items" style="flex-grow:1; overflow-y:auto; margin: 20px 0;">
            <p style="color:#777; font-style:italic;">Your list is empty.</p>
        </div>
        <div style="border-top:1px solid #ddd; padding-top:20px;">
            <p style="font-size:1.1em; margin-bottom:15px; color:var(--text-color);"><strong>Estimate: Rs. <span id="cart-total">0</span></strong></p>
            <button id="checkout-whatsapp" class="btn btn-whatsapp" style="width: 100%; margin-bottom: 10px; border-radius:4px;"><i class="fab fa-whatsapp"></i> Send to MD</button>
            <button id="close-cart" class="btn" style="width: 100%; background-color: #7f8c8d; color: white; border-radius:4px;">Close Panel</button>
        </div>
    </div>

    <button id="open-cart-btn">
        <i class="fas fa-shopping-bag"></i>
        <span id="cart-indicator" style="position: absolute; top: -5px; right: -5px; background-color: #c0392b; color: white; border-radius: 50%; padding: 4px 7px; font-size: 11px; display: none;">0</span>
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Configuration
        const firebaseConfig = {
          apiKey: "AIzaSyBUjzMFao9BS3uXBOW3qYrLVqHaGn8qIk4",
          authDomain: "onlineshop-30cd1.firebaseapp.com",
          projectId: "onlineshop-30cd1",
          storageBucket: "onlineshop-30cd1.firebasestorage.app",
          messagingSenderId: "818252574868",
          appId: "1:818252574868:web:8dd36825db589a886cc481",
          measurementId: "G-6YLGGH2NDD"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Load Products
        const productGrid = document.getElementById('productGrid');
        
        async function loadProducts() {
            try {
                const querySnapshot = await getDocs(collection(db, "products"));
                productGrid.innerHTML = ''; 
                
                if(querySnapshot.empty) {
                    productGrid.innerHTML = '<p>No products loaded yet.</p>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const isCallNow = data.priceType === 'call';
                    const priceDisplay = isCallNow ? 'Call for Price' : `Rs. ${parseInt(data.price).toLocaleString()}`;
                    
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.innerHTML = `
                        <img src="${data.imageUrl}" alt="${data.name}">
                        <div class="product-info">
                            <h4>${data.name}</h4>
                            <p style="font-size:0.9em; color:#666; margin-bottom:10px;">${data.description}</p>
                            <p style="color:var(--secondary-color); font-weight:bold; font-size:1.2em;">${priceDisplay}</p>
                            <div class="product-actions">
                                ${!isCallNow ? `<button class="btn-sm add-to-cart" data-name="${data.name}" data-price="${data.price}"><i class="fas fa-plus"></i> Add List</button>` : ''}
                                <a href="https://wa.me/94777585682?text=Hi%20Isuru%20Furniture,%20I%20am%20interested%20in%20${encodeURIComponent(data.name)}" target="_blank" class="btn-sm btn-whatsapp"><i class="fab fa-whatsapp"></i> Chat</a>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(card);
                });
                attachCartListeners();
            } catch (error) {
                console.error("Error:", error);
                productGrid.innerHTML = '<p>Loading failed. Please check connection.</p>';
            }
        }
        loadProducts();

        // Mobile Menu
        const menuToggle = document.getElementById('menuToggle');
        const navList = document.getElementById('navList');
        menuToggle.addEventListener('click', () => navList.classList.toggle('active'));
        document.querySelectorAll('.nav-list a').forEach(l => l.addEventListener('click', () => navList.classList.remove('active')));

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Contact Form
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const message = document.getElementById('message').value;
            const text = `*New Inquiry - Isuru Furniture*\n\nName: ${name}\nPhone: ${phone}\nMessage: ${message}`;
            window.open(`https://wa.me/94777585682?text=${encodeURIComponent(text)}`, '_blank');
            this.reset();
        });

        // Cart System
        let cart = [];
        const cartSidebar = document.getElementById('cart-sidebar');
        
        function updateCartUI() {
            const count = document.getElementById('cart-count');
            const indicator = document.getElementById('cart-indicator');
            const itemsDiv = document.getElementById('cart-items');
            const totalSpan = document.getElementById('cart-total');
            
            count.textContent = cart.length;
            indicator.textContent = cart.length;
            indicator.style.display = cart.length ? 'block' : 'none';
            
            itemsDiv.innerHTML = '';
            let total = 0;
            
            if(!cart.length) itemsDiv.innerHTML = '<p style="color:#777; padding:10px;">Your list is empty.</p>';
            else {
                cart.forEach((item, i) => {
                    total += item.price;
                    const row = document.createElement('div');
                    row.innerHTML = `
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:5px;">
                            <div>
                                <div style="font-weight:600; color:#333;">${item.product}</div>
                                <div style="font-size:0.9em; color:#666;">Rs. ${item.price.toLocaleString()}</div>
                            </div>
                            <button onclick="window.removeCartItem(${i})" style="background:none; border:none; color:#c0392b; cursor:pointer;"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    itemsDiv.appendChild(row);
                });
            }
            totalSpan.textContent = total.toLocaleString();
        }

        window.removeCartItem = (index) => {
            cart.splice(index, 1);
            updateCartUI();
        };

        function attachCartListeners() {
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                const newBtn = btn.cloneNode(true);
                btn.parentNode.replaceChild(newBtn, btn);
                newBtn.addEventListener('click', function() {
                    cart.push({
                        product: this.dataset.name,
                        price: parseFloat(this.dataset.price)
                    });
                    updateCartUI();
                    cartSidebar.style.right = '0';
                });
            });
        }

        document.getElementById('open-cart-btn').addEventListener('click', () => cartSidebar.style.right = '0');
        document.getElementById('close-cart').addEventListener('click', () => cartSidebar.style.right = '-400px');

        document.getElementById('checkout-whatsapp').addEventListener('click', () => {
            if(!cart.length) return alert("Please select items first.");
            let msg = "*Order Inquiry - Isuru Furniture*\n\nI am interested in:\n";
            let total = 0;
            cart.forEach(item => {
                msg += `- ${item.product} (Rs. ${item.price.toLocaleString()})\n`;
                total += item.price;
            });
            msg += `\n*Total Estimated: Rs. ${total.toLocaleString()}*`;
            window.open(`https://wa.me/94777585682?text=${encodeURIComponent(msg)}`, '_blank');
            cart = [];
            updateCartUI();
            cartSidebar.style.right = '-400px';
        });

        // Testimonial Carousel
        const carousel = document.querySelectorAll('.testimonial-card');
        let currentIdx = 0;
        setInterval(() => {
            carousel[currentIdx].classList.remove('active');
            currentIdx = (currentIdx + 1) % carousel.length;
            carousel[currentIdx].classList.add('active');
        }, 5000);

    </script>
</body>
</html>
