<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isuru Furniture - 45 Years of Excellence</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Theme: Midnight Navy, Bronze, and Pearl */
            --primary-color: #0f2b46; /* Midnight Navy - Represents Trust & Stability */
            --secondary-color: #c5a059; /* Bronze Gold - Represents 45 Years of Excellence */
            --accent-color: #5d4037; /* Wood Tone */
            --text-color: #333333;
            --light-bg: #fdfbf7; /* Pearl White */
            --white: #ffffff;
            --gray-border: #e6e6e6;
            --font-family: 'Playfair Display', 'Georgia', serif;
            --sans-font: 'Segoe UI', Roboto, sans-serif;
        }

        /* Reset & Base */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--sans-font); line-height: 1.6; color: var(--text-color); background-color: var(--light-bg); overflow-x: hidden; }
        h1, h2, h3, h4 { font-family: var(--font-family); letter-spacing: 0.5px; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Header */
        header { background-color: var(--white); border-bottom: 1px solid var(--gray-border); padding: 10px 0; }
        .top-bar { background-color: var(--primary-color); color: var(--secondary-color); font-size: 0.85em; text-align: center; padding: 8px 0; letter-spacing: 1px; }
        
        .header-content { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; }
        .logo { display: flex; align-items: center; }
        .logo img { height: 60px; margin-right: 15px; }
        .logo h1 { font-size: 2.2em; font-weight: 700; color: var(--primary-color); text-transform: uppercase; line-height: 1; }
        .logo span { font-size: 0.4em; color: var(--secondary-color); display: block; letter-spacing: 2px; font-family: var(--sans-font); }
        
        .contact-info { text-align: right; font-size: 0.9em; color: var(--text-color); }
        .contact-info div { margin-bottom: 5px; }
        .contact-info i { color: var(--primary-color); width: 20px; text-align: center; }

        /* Navigation */
        nav { background-color: var(--primary-color); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .nav-list { list-style: none; display: flex; justify-content: center; margin: 0; padding: 0; }
        .nav-list a { display: block; color: var(--white); text-decoration: none; font-weight: 500; padding: 18px 30px; transition: 0.3s; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; }
        .nav-list a:hover { background-color: var(--secondary-color); color: var(--primary-color); }

        /* Mobile Toggle */
        .menu-toggle { display: none; background: none; border: none; color: var(--secondary-color); font-size: 1.8em; position: absolute; right: 20px; top: 5px; cursor: pointer; }

        /* Hero Section */
        .hero { background: linear-gradient(rgba(15, 43, 70, 0.8), rgba(15, 43, 70, 0.7)), url('bac.png') no-repeat center center/cover; color: var(--white); text-align: center; padding: 140px 20px; }
        .hero h2 { font-size: 3.8em; margin-bottom: 15px; font-weight: 700; color: var(--secondary-color); }
        .hero p { font-size: 1.5em; margin-bottom: 35px; font-weight: 300; max-width: 700px; margin-left: auto; margin-right: auto; color: #eee; }
        .btn { display: inline-block; background-color: var(--secondary-color); color: var(--primary-color); padding: 12px 35px; text-decoration: none; border-radius: 4px; font-weight: 700; text-transform: uppercase; transition: 0.3s; cursor: pointer; border: none; letter-spacing: 1px; box-shadow: 0 4px 15px rgba(197, 160, 89, 0.3); }
        .btn:hover { background-color: var(--white); color: var(--primary-color); transform: translateY(-3px); }

        /* Section Global */
        .section { padding: 90px 0; text-align: center; }
        .section h3 { font-size: 2.5em; margin-bottom: 10px; color: var(--primary-color); }
        .section-subtitle { font-family: var(--sans-font); color: var(--secondary-color); text-transform: uppercase; font-weight: 700; letter-spacing: 2px; margin-bottom: 40px; display: block; font-size: 0.9em; }
        .section p { font-size: 1.1em; max-width: 800px; margin: 0 auto 50px; color: #666; }

        /* About Us */
        .about-us { background-color: var(--white); text-align: left; }
        .about-content { display: flex; flex-wrap: wrap; align-items: center; gap: 60px; margin-top: 30px; }
        .about-image { flex: 1; min-width: 300px; position: relative; }
        .about-image img { width: 100%; border-radius: 4px; box-shadow: 20px 20px 0 var(--secondary-color); }
        .about-text { flex: 1.2; min-width: 300px; }
        .about-text h4 { font-size: 1.8em; color: var(--primary-color); margin-bottom: 15px; }
        .about-text p { margin-bottom: 15px; text-align: justify; line-height: 1.8; }
        .director-sign { margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; }
        .director-sign strong { color: var(--primary-color); font-size: 1.1em; }
        .director-sign span { display: block; font-size: 0.9em; color: var(--secondary-color); }

        /* Features */
        .features { background-color: var(--light-bg); }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .feature-item { background: var(--white); padding: 40px 30px; border-radius: 8px; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.05); }
        .feature-item:hover { transform: translateY(-10px); border-bottom: 5px solid var(--secondary-color); }
        .feature-item i { font-size: 3em; color: var(--secondary-color); margin-bottom: 20px; }
        .feature-item h4 { font-size: 1.3em; margin-bottom: 10px; color: var(--primary-color); }

        /* Products */
        .products { background-color: var(--white); }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 30px; }
        .product-card { background: var(--white); border: 1px solid #eee; transition: 0.3s; border-radius: 6px; overflow: hidden; }
        .product-card:hover { box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .product-card img { width: 100%; height: 260px; object-fit: cover; }
        .product-info { padding: 25px; text-align: left; }
        .product-info h4 { font-size: 1.3em; margin-bottom: 8px; color: var(--primary-color); }
        .product-actions { display: flex; gap: 10px; margin-top: 15px; }
        .product-actions .btn { padding: 10px; font-size: 0.85em; flex: 1; text-align: center; }
        .add-to-cart { background-color: var(--primary-color); color: white; }
        .btn-whatsapp { background-color: #25d366; color: white; }

        /* Contact & Socials */
        .social-bar { margin: 20px 0; display: flex; gap: 15px; justify-content: flex-start; }
        .social-link { width: 40px; height: 40px; background: var(--primary-color); color: white; display: flex; justify-content: center; align-items: center; border-radius: 50%; text-decoration: none; transition: 0.3s; }
        .social-link:hover { background: var(--secondary-color); transform: rotate(360deg); }

        .contact-section { background: var(--primary-color); color: white; position: relative; overflow: hidden; }
        .contact-section h3, .contact-section p { color: white; }
        .contact-section .section-subtitle { color: var(--secondary-color); }
        .contact-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; text-align: left; }
        
        .contact-form { background: white; padding: 40px; border-radius: 8px; color: var(--text-color); }
        .contact-form label { color: var(--primary-color); font-weight: 700; display: block; margin-bottom: 8px; }
        .contact-form input, .contact-form textarea { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; }
        
        .contact-details p { margin-bottom: 20px; display: flex; align-items: flex-start; font-size: 1.1em; color: rgba(255,255,255,0.9); }
        .contact-details i { color: var(--secondary-color); margin-right: 15px; margin-top: 5px; font-size: 1.2em; }
        .contact-details a { color: white; text-decoration: none; }

        /* Footer */
        footer { background-color: #0a1d30; color: #888; text-align: center; padding: 50px 0; border-top: 5px solid var(--secondary-color); }
        footer a { color: var(--secondary-color); text-decoration: none; }

        /* Widgets */
        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 30px; right: 30px; background-color: #25d366; color: #FFF; border-radius: 50px; text-align: center; font-size: 32px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; display: flex; align-items: center; justify-content: center; text-decoration: none !important; }
        #cart-sidebar { position: fixed; top: 0; right: -400px; width: 350px; height: 100%; background-color: var(--white); box-shadow: -5px 0 15px rgba(0,0,0,0.1); z-index: 1001; padding: 30px; transition: right 0.4s ease; display: flex; flex-direction: column; }
        #open-cart-btn { position: fixed; bottom: 110px; right: 30px; width: 60px; height: 60px; background-color: var(--primary-color); color: var(--secondary-color); border: 2px solid var(--secondary-color); border-radius: 50%; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 999; cursor: pointer; }

        /* 300px Responsive Logic (Super Wonderful) */
        @media (max-width: 768px) {
            .header-content { flex-direction: column; text-align: center; gap: 15px; }
            .contact-info { text-align: center; margin-top: 10px; }
            .menu-toggle { display: block; }
            .nav-list { display: none; flex-direction: column; width: 100%; padding: 10px 0; }
            .nav-list.active { display: flex; }
            .nav-list li { border-bottom: 1px solid rgba(255,255,255,0.1); }
            .hero h2 { font-size: 2.5em; }
            .about-content, .contact-grid { grid-template-columns: 1fr; }
            #cart-sidebar { width: 100%; right: -100%; }
        }

        @media (max-width: 350px) {
            .container { padding: 0 12px; }
            .logo h1 { font-size: 1.6em; }
            .hero { padding: 80px 10px; }
            .hero h2 { font-size: 2em; line-height: 1.2; }
            .hero p { font-size: 1em; }
            .section { padding: 60px 0; }
            .section h3 { font-size: 1.8em; }
            .feature-item, .product-card { width: 100%; }
            .contact-info { font-size: 0.8em; }
            .whatsapp-float, #open-cart-btn { width: 50px; height: 50px; font-size: 24px; right: 15px; }
            #open-cart-btn { bottom: 75px; }
            .whatsapp-float { bottom: 15px; }
            .btn { width: 100%; text-align: center; padding: 12px 10px; font-size: 0.9em; }
            .product-actions { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div class="top-bar">
        Welcome to Isuru Furniture - Moratumulla's Finest Since 1978
    </div>

    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="logo.png" alt="Isuru Furniture Logo">
                <div>
                    <h1>Isuru Furniture</h1>
                    <span>OVER 45 YEARS OF EXCELLENCE</span>
                </div>
            </div>
            <div class="contact-info">
                <div><i class="fas fa-phone-alt"></i> <a href="tel:+94758004160" style="color:inherit; text-decoration:none;">075 800 4160</a> | <a href="tel:+94777585682" style="color:inherit; text-decoration:none;">077 758 5682</a></div>
                <div><i class="fas fa-phone"></i> 011 265 2843</div>
                <div><i class="fas fa-map-marker-alt"></i> 209/B, De Soysa Rd, Moratumulla</div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
            <ul class="nav-list" id="navList">
                <li><a href="#about">Our Legacy</a></li>
                <li><a href="#features">Why Choose Us</a></li>
                <li><a href="#products">Collection</a></li>
                <li><a href="#contact">Contact Us</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <h2>Timeless Elegance, Built to Last</h2>
                <p>Experience over 45 years of Moratumulla's legendary craftsmanship. We create furniture that defines generations.</p>
                <a href="#products" class="btn">View Catalogue</a>
            </div>
        </section>

        <section id="about" class="section about-us">
            <div class="container">
                <h3>The Isuru Standard</h3>
                <span class="section-subtitle">A Tradition of Quality</span>
                
                <div class="about-content">
                    <div class="about-image">
                        <img src="shop.png" alt="Isuru Furniture Workshop">
                    </div>
                    <div class="about-text">
                        <h4>Four Decades of Mastery</h4>
                        <p>Established in the heart of Moratuwa's carpentry hub, <strong>Isuru Furniture</strong> has been a beacon of quality for over 45 years. We don't just manufacture furniture; we craft heirlooms. From humble beginnings to becoming a trusted name in Sri Lanka, our journey is paved with the satisfaction of thousands of customers.</p>
                        <p>Specializing in Teak, Mahogany, and Nadun, we combine traditional carving techniques with modern aesthetics. Every curve, joint, and polish is inspected to ensure it meets our rigorous standards.</p>
                        <div class="director-sign">
                            <strong>W. Lasantha Fernando</strong>
                            <span>Managing Director</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="section features">
            <div class="container">
                <h3>Why Isuru Furniture?</h3>
                <span class="section-subtitle">Excellence in Every Detail</span>
                
                <div class="features-grid">
                    <div class="feature-item">
                        <i class="fas fa-history"></i>
                        <h4>45+ Years Experience</h4>
                        <p>We possess deep industry knowledge that only time can teach. Your furniture is built by seasoned masters.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-tools"></i>
                        <h4>Custom Manufacturing</h4>
                        <p>Bring us a design from anywhere in the world, and we will recreate it for you with premium local timber.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-gem"></i>
                        <h4>Premium Materials</h4>
                        <p>We use only well-seasoned, treated timber and high-quality fabrics to ensure durability in our tropical climate.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-handshake"></i>
                        <h4>Direct from Factory</h4>
                        <p>Located at 209/B, De Soysa Rd, Moratumulla. Buy directly from us to get the best price without middleman margins.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="section products">
            <div class="container">
                <h3>Our Exclusive Collection</h3>
                <span class="section-subtitle">Browse Our Latest Designs</span>
                <p>From royal bedroom suites to contemporary living room setups.</p>

                <div class="product-grid" id="productGrid">
                    <!-- Products loaded via Firebase -->
                    <p style="width:100%; text-align:center; padding: 40px; font-size:1.2em; color:var(--primary-color);">Loading our finest collection...</p>
                </div>
            </div>
        </section>

        <section id="contact" class="section contact-section">
            <div class="container">
                <h3>Connect With Us</h3>
                <span class="section-subtitle">Let's Discuss Your Dream Furniture</span>

                <div class="contact-grid">
                    <div class="contact-info-block">
                        <div class="contact-details">
                            <p><i class="fas fa-map-marker-alt"></i> <span>209/B, De Soysa Rd,<br>Moratumulla, Moratuwa.</span></p>
                            <p><i class="fas fa-phone-alt"></i> <span><a href="tel:0758004160">075 800 4160</a> / <a href="tel:0777585682">077 758 5682</a></span></p>
                            <p><i class="fas fa-phone"></i> <span>011 265 2843 / 011 265 2582</span></p>
                            <p><i class="fas fa-envelope"></i> <span>isurufurniture777@gmail.com</span></p>
                        </div>
                        
                        <h4 style="color:white; margin-top:30px;">Follow Us</h4>
                        <div class="social-bar">
                            <a href="https://www.facebook.com/isuru.furniture" target="_blank" class="social-link"><i class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com/isuru.furniture" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.tiktok.com/@isuru.furniture" target="_blank" class="social-link"><i class="fab fa-tiktok"></i></a>
                        </div>
                    </div>

                    <div class="contact-form">
                        <form id="contactForm">
                            <label>Name</label>
                            <input type="text" id="name" required>
                            <label>Mobile Number</label>
                            <input type="tel" id="phone" required>
                            <label>Message / Inquiry</label>
                            <textarea id="message" rows="4" required></textarea>
                            <button type="submit" class="btn" style="width:100%;">Send Inquiry via WhatsApp</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; <span id="currentYear"></span> Isuru Furniture. All rights reserved.</p>
            <p>209/B, De Soysa Rd, Moratumulla, Moratuwa.</p>
            <p style="font-size: 0.85em; opacity: 0.6; margin-top: 15px;">Web Solution by Sahan Colombage</p>
            <p><a href="admin.html" style="font-size: 0.8em; opacity: 0.5;">Admin Login</a></p>
        </div>
    </footer> 

    <!-- Floating WhatsApp (Main Mobile) -->
    <a href="https://wa.me/94777585682" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar">
        <h3 style="color:var(--primary-color); border-bottom:2px solid var(--secondary-color); padding-bottom:10px;">Quote Request (<span id="cart-count">0</span>)</h3>
        <div id="cart-items" style="flex-grow:1; overflow-y:auto; margin: 20px 0;">
            <p style="color:#777; font-style:italic;">No items selected.</p>
        </div>
        <div style="border-top:1px solid #ddd; padding-top:20px;">
            <p style="font-size:1.1em; margin-bottom:15px; color:var(--text-color);"><strong>Total Estimate: Rs. <span id="cart-total">0</span></strong></p>
            <button id="checkout-whatsapp" class="btn btn-whatsapp" style="width: 100%; margin-bottom: 10px; border-radius:4px;"><i class="fab fa-whatsapp"></i> Send List to MD</button>
            <button id="close-cart" class="btn" style="width: 100%; background-color: #7f8c8d; color: white; border-radius:4px;">Close</button>
        </div>
    </div>

    <button id="open-cart-btn">
        <i class="fas fa-shopping-bag"></i>
        <span id="cart-indicator" style="position: absolute; top: -5px; right: -5px; background-color: #c0392b; color: white; border-radius: 50%; padding: 4px 7px; font-size: 11px; display: none;">0</span>
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // Same Firebase Config
        const firebaseConfig = {
          apiKey: "AIzaSyBUjzMFao9BS3uXBOW3qYrLVqHaGn8qIk4",
          authDomain: "onlineshop-30cd1.firebaseapp.com",
          projectId: "onlineshop-30cd1",
          storageBucket: "onlineshop-30cd1.firebasestorage.app",
          messagingSenderId: "818252574868",
          appId: "1:818252574868:web:8dd36825db589a886cc481",
          measurementId: "G-6YLGGH2NDD"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const productGrid = document.getElementById('productGrid');
        
        async function loadProducts() {
            try {
                const querySnapshot = await getDocs(collection(db, "products"));
                productGrid.innerHTML = ''; 
                
                if(querySnapshot.empty) {
                    productGrid.innerHTML = '<p>No products available currently.</p>';
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const isCallNow = data.priceType === 'call';
                    const priceDisplay = isCallNow ? 'Call for Price' : `Rs. ${parseInt(data.price).toLocaleString()}`;
                    
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.innerHTML = `
                        <img src="${data.imageUrl}" alt="${data.name}">
                        <div class="product-info">
                            <h4>${data.name}</h4>
                            <p style="font-size:0.9em; color:#666; min-height:40px;">${data.description}</p>
                            <p style="color:var(--secondary-color); font-weight:bold; font-size:1.2em; margin: 10px 0;">${priceDisplay}</p>
                            <div class="product-actions">
                                ${!isCallNow ? `<button class="btn add-to-cart" data-name="${data.name}" data-price="${data.price}"><i class="fas fa-plus-circle"></i> Add to Quote</button>` : ''}
                                <a href="https://wa.me/94777585682?text=Hi%20Isuru%20Furniture,%20I%20am%20interested%20in%20${encodeURIComponent(data.name)}" target="_blank" class="btn btn-whatsapp"><i class="fab fa-whatsapp"></i> Chat</a>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(card);
                });
                attachCartListeners();
            } catch (error) {
                console.error("Error:", error);
                productGrid.innerHTML = '<p>Loading failed. Please check connection.</p>';
            }
        }
        loadProducts();

        // Mobile Menu
        const menuToggle = document.getElementById('menuToggle');
        const navList = document.getElementById('navList');
        menuToggle.addEventListener('click', () => navList.classList.toggle('active'));
        document.querySelectorAll('.nav-list a').forEach(l => l.addEventListener('click', () => navList.classList.remove('active')));

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Contact Form
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const message = document.getElementById('message').value;
            // Sending to main mobile 0777585682
            const text = `*New Inquiry - Isuru Furniture*\n\nName: ${name}\nPhone: ${phone}\nMessage: ${message}`;
            window.open(`https://wa.me/94777585682?text=${encodeURIComponent(text)}`, '_blank');
            this.reset();
        });

        // Cart System
        let cart = [];
        const cartSidebar = document.getElementById('cart-sidebar');
        
        function updateCartUI() {
            const count = document.getElementById('cart-count');
            const indicator = document.getElementById('cart-indicator');
            const itemsDiv = document.getElementById('cart-items');
            const totalSpan = document.getElementById('cart-total');
            
            count.textContent = cart.length;
            indicator.textContent = cart.length;
            indicator.style.display = cart.length ? 'block' : 'none';
            
            itemsDiv.innerHTML = '';
            let total = 0;
            
            if(!cart.length) itemsDiv.innerHTML = '<p style="color:#777; padding:10px;">Your quote list is empty.</p>';
            else {
                cart.forEach((item, i) => {
                    total += item.price;
                    const row = document.createElement('div');
                    row.innerHTML = `
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:5px;">
                            <div>
                                <div style="font-weight:600; color:#333;">${item.product}</div>
                                <div style="font-size:0.9em; color:#666;">Rs. ${item.price.toLocaleString()}</div>
                            </div>
                            <button onclick="window.removeCartItem(${i})" style="background:none; border:none; color:#c0392b; cursor:pointer;"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    itemsDiv.appendChild(row);
                });
            }
            totalSpan.textContent = total.toLocaleString();
        }

        window.removeCartItem = (index) => {
            cart.splice(index, 1);
            updateCartUI();
        };

        function attachCartListeners() {
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                const newBtn = btn.cloneNode(true);
                btn.parentNode.replaceChild(newBtn, btn);
                newBtn.addEventListener('click', function() {
                    cart.push({
                        product: this.dataset.name,
                        price: parseFloat(this.dataset.price)
                    });
                    updateCartUI();
                    cartSidebar.style.right = '0';
                });
            });
        }

        document.getElementById('open-cart-btn').addEventListener('click', () => cartSidebar.style.right = '0';
        document.getElementById('close-cart').addEventListener('click', () => cartSidebar.style.right = '-400px';

        document.getElementById('checkout-whatsapp').addEventListener('click', () => {
            if(!cart.length) return alert("Please select items first.");
            let msg = "*Quote Request - Isuru Furniture*\n\nI am interested in:\n";
            let total = 0;
            cart.forEach(item => {
                msg += `- ${item.product} (Rs. ${item.price.toLocaleString()})\n`;
                total += item.price;
            });
            msg += `\n*Total Value: Rs. ${total.toLocaleString()}*`;
            window.open(`https://wa.me/94777585682?text=${encodeURIComponent(msg)}`, '_blank');
            cart = [];
            updateCartUI();
            cartSidebar.style.right = '-400px';
        });

    </script>
</body>
</html>
